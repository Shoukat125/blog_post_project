{% extends "base.html" %}
{% block content %}
  <article class="single-post">
    <h1>{{ post.title }}</h1>
    <p class="meta">By {{ post.author.username }} — {{ post.created_at.strftime('%b %d, %Y %H:%M') }}</p>
    <div class="post-body">{{ post.body | replace('\n','<br>') | safe }}</div>

    {% if current_user.is_authenticated and post.author == current_user %}
      <div class="post-actions">
        <a class="btn" href="{{ url_for('edit_post', post_id=post.id) }}">Edit</a>
        <form method="post" action="{{ url_for('delete_post', post_id=post.id) }}" style="display:inline;">
          <button class="btn btn-danger" type="submit" onclick="return confirm('Delete this post?')">Delete</button>
        </form>
      </div>
    {% endif %}

    <p><a href="{{ url_for('index') }}">← Back to all posts</a></p>
  </article>
{% endblock %}
